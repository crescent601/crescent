{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container mt-4">
    {# ... (आपके मौजूदा मैसेज डिस्प्ले लॉजिक) ... #}

    <h2 class="mt-5 mb-3">Our Trainings</h2>
    <div class="row">
        {% for category in all_categories %}
            {# Check if the category is locked based on the passed context #}
            {% with is_locked=category_lock_status|get_item:category.id %} {# Make sure get_item filter is loaded, or use dictionary.get(key) #}
            <div class="col-md-4 mb-4">
                <div class="card category-card {% if is_locked %}locked{% endif %}">
                    {% if is_locked %}
                        <div class="locked-overlay-category">
                            <i class="fas fa-lock me-2"></i> Locked - Complete previous categories
                        </div>
                    {% endif %}
                    <div class="card-body">
                        <h5 class="card-title">{{ category.name }}</h5>
                        <p class="card-text">
                            {% comment %}
                                Optionally show training description here if available
                                {% if category.producttraining_set.first.description %}
                                    {{ category.producttraining_set.first.description|truncatechars:100 }}
                                {% endif %}
                            {% endcomment %}
                            This category contains various training videos.
                        </p>
                        {# Link to product videos - disabled if locked #}
                        <a href="{% url 'product_videos' category.producttraining_set.first.id %}" 
                           class="btn btn-primary {% if is_locked %}disabled{% endif %}" 
                           {% if is_locked %}aria-disabled="true" tabindex="-1"{% endif %}>
                            View Trainings
                        </a>
                    </div>
                </div>
            </div>
            {% endwith %}
        {% endfor %}
    </div>

    {# ... (आपके मौजूदा पोस्ट्स लिस्टिंग, यदि कोई हो) ... #}

</div>
{% endblock %}

{% block extra_js %}
{# ... (आपके मौजूदा JavaScript लिंक्स) ... #}
{% endblock %}